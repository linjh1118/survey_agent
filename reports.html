<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è°ƒç ”æŠ¥å‘Šæµè§ˆå™¨ - Survey Agent</title>
    <meta name="description" content="æµè§ˆSurvey Agentç”Ÿæˆçš„æ‰€æœ‰è°ƒç ”æŠ¥å‘Š">
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/microsoft/fluentui-emoji/assets/ğŸ“š/3d/ğŸ“š_3d.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1e40af;
            --secondary-color: #64748b;
            --background-light: #f8fafc;
            --background-white: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --border-radius: 8px;
            --border-radius-lg: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--background-light);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #16a085 0%, #2980b9 100%);
            color: white;
            padding: 2rem 0;
            box-shadow: var(--shadow);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            text-align: center;
        }

        .header-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .header-subtitle {
            font-size: 1.125rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }

        .header-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        .nav-links {
            margin-top: 1rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            transition: background-color 0.2s ease;
        }

        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .toolbar {
            background: var(--background-white);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 3rem;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        .reports-grid {
            display: grid;
            gap: 1.5rem;
        }

        .report-card {
            background: var(--background-white);
            border-radius: var(--border-radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border-left: 4px solid #16a085;
        }

        .report-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
            gap: 1rem;
        }

        .report-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .report-size {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-family: monospace;
            background: var(--background-light);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            flex-shrink: 0;
        }

        .report-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .report-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .btn-primary {
            background: #16a085;
            color: white;
        }

        .btn-primary:hover {
            background: #148f77;
        }

        .btn-secondary {
            background: var(--background-light);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--border-color);
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--border-color);
            border-top: 4px solid #16a085;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            padding: 2rem;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding-top: 2rem;
        }

        .modal-content {
            background: var(--background-white);
            border-radius: var(--border-radius-lg);
            padding: 0;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 2rem 0 2rem;
            border-bottom: 1px solid var(--border-color);
            flex-shrink: 0;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
            padding: 0.5rem;
            border-radius: var(--border-radius);
        }

        .close-btn:hover {
            background: var(--background-light);
        }

        .modal-body {
            padding: 2rem;
            overflow-y: auto;
            flex: 1;
        }

        .report-content {
            line-height: 1.8;
        }

        .report-content h1,
        .report-content h2,
        .report-content h3 {
            margin: 2rem 0 1rem 0;
            color: var(--text-primary);
        }

        .report-content h1 {
            font-size: 1.875rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .report-content h2 {
            font-size: 1.5rem;
        }

        .report-content h3 {
            font-size: 1.25rem;
        }

        .report-content p {
            margin-bottom: 1rem;
        }

        .report-content pre {
            background: var(--background-light);
            padding: 1rem;
            border-radius: var(--border-radius);
            overflow-x: auto;
            font-size: 0.875rem;
            margin: 1rem 0;
        }

        .report-content blockquote {
            border-left: 4px solid #16a085;
            padding: 1rem;
            margin: 1rem 0;
            background: var(--background-light);
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
        }

        .report-content ul,
        .report-content ol {
            padding-left: 2rem;
            margin-bottom: 1rem;
        }

        .report-content li {
            margin-bottom: 0.5rem;
        }

        .report-content a {
            color: #16a085;
            text-decoration: none;
        }

        .report-content a:hover {
            text-decoration: underline;
        }

        .floating-action {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: #16a085;
            color: white;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: all 0.2s ease;
        }

        .floating-action:hover {
            background: #148f77;
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            .header-title {
                font-size: 1.75rem;
                flex-direction: column;
                gap: 0.5rem;
            }

            .header-stats {
                gap: 1rem;
            }

            .toolbar {
                flex-direction: column;
                align-items: stretch;
            }

            .search-box {
                min-width: auto;
            }

            .report-header {
                flex-direction: column;
                align-items: start;
            }

            .report-actions {
                flex-wrap: wrap;
            }

            .container {
                padding: 1rem;
            }

            .modal {
                padding: 1rem;
            }

            .modal-content {
                max-height: 95vh;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <h1 class="header-title">
                ğŸ“Š è°ƒç ”æŠ¥å‘Šæµè§ˆå™¨
            </h1>
            <p class="header-subtitle">æµè§ˆå’Œç®¡ç†Survey Agentç”Ÿæˆçš„æ‰€æœ‰è°ƒç ”æŠ¥å‘Š</p>
            <div class="header-stats">
                <div class="stat-item">
                    <span class="stat-number" id="totalReports">-</span>
                    <span class="stat-label">è°ƒç ”æŠ¥å‘Š</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalSize">-</span>
                    <span class="stat-label">æ€»å¤§å°</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="avgSize">-</span>
                    <span class="stat-label">å¹³å‡å¤§å°</span>
                </div>
            </div>
            <div class="nav-links">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home"></i> è¿”å›ä¸»é¡µ
                </a>
                <a href="papers.html" class="nav-link">
                    <i class="fas fa-file-text"></i> è®ºæ–‡æµè§ˆå™¨
                </a>
                <a href="pdf_viewer.html" class="nav-link">
                    <i class="fas fa-file-pdf"></i> PDFæµè§ˆå™¨
                </a>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="toolbar">
            <div class="search-box">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" id="searchInput" 
                       placeholder="æœç´¢æŠ¥å‘Šæ ‡é¢˜æˆ–æ–‡ä»¶å...">
            </div>
        </div>

        <div id="loadingState" class="loading">
            <div class="spinner"></div>
        </div>

        <div id="reportsContainer" class="reports-grid" style="display: none;"></div>

        <div id="emptyState" class="empty-state" style="display: none;">
            <div class="empty-icon">ğŸ“„</div>
            <h3>æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æŠ¥å‘Š</h3>
            <p>å°è¯•è°ƒæ•´æœç´¢æ¡ä»¶</p>
        </div>
    </div>

    <button class="floating-action" id="backToTop" title="å›åˆ°é¡¶éƒ¨" style="display: none;">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- æŠ¥å‘Šè¯¦æƒ…æ¨¡æ€æ¡† -->
    <div class="modal" id="reportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle"></h2>
                <button class="close-btn" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <div class="report-content" id="reportContent"></div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let allReports = [];
        let filteredReports = [];
        let currentSearch = '';

        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                await loadReports();
                initializeEventListeners();
                updateStats();
                renderReports();
            } catch (error) {
                showError('åŠ è½½æŠ¥å‘Šæ•°æ®å¤±è´¥ï¼š' + error.message);
            }
        });

        // åŠ è½½æŠ¥å‘Šæ•°æ®
        async function loadReports() {
            try {
                // é¦–å…ˆå°è¯•åŠ è½½æ¼”ç¤ºæ•°æ®
                let response = await fetch('cache/demo_reports.json');
                if (response.ok) {
                    allReports = await response.json();
                } else {
                    // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
                    allReports = createMockReports();
                }
                
                filteredReports = [...allReports];
                
                // æ¨¡æ‹ŸåŠ è½½å»¶è¿Ÿ
                await new Promise(resolve => setTimeout(resolve, 500));
                
            } catch (error) {
                // å‡ºé”™æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
                allReports = createMockReports();
                filteredReports = [...allReports];
            }
        }

        // åˆ›å»ºæ¨¡æ‹ŸæŠ¥å‘Šæ•°æ®
        function createMockReports() {
            return [
                {
                    filename: "survey_result_ai_agents.md",
                    title: "AIæ™ºèƒ½ä½“æŠ€æœ¯è°ƒç ”æŠ¥å‘Š",
                    created_at: new Date(Date.now() - 86400000).toISOString(),
                    modified_at: new Date().toISOString(),
                    size: 45230
                },
                {
                    filename: "survey_result_llm_training.md", 
                    title: "å¤§è¯­è¨€æ¨¡å‹è®­ç»ƒæ–¹æ³•ç»¼è¿°",
                    created_at: new Date(Date.now() - 172800000).toISOString(),
                    modified_at: new Date(Date.now() - 86400000).toISOString(),
                    size: 38567
                },
                {
                    filename: "survey_result_reinforcement_learning.md",
                    title: "å¼ºåŒ–å­¦ä¹ åœ¨NLPä¸­çš„åº”ç”¨",
                    created_at: new Date(Date.now() - 259200000).toISOString(),
                    modified_at: new Date(Date.now() - 172800000).toISOString(),
                    size: 52104
                }
            ];
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        function initializeEventListeners() {
            // æœç´¢åŠŸèƒ½
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', debounce(handleSearch, 300));

            // å›åˆ°é¡¶éƒ¨æŒ‰é’®
            const backToTopBtn = document.getElementById('backToTop');
            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // æ»šåŠ¨æ˜¾ç¤º/éšè—å›åˆ°é¡¶éƒ¨æŒ‰é’®
            window.addEventListener('scroll', () => {
                backToTopBtn.style.display = window.scrollY > 300 ? 'block' : 'none';
            });

            // æ¨¡æ€æ¡†å…³é—­
            document.getElementById('closeModal').addEventListener('click', closeModal);
            document.getElementById('reportModal').addEventListener('click', (e) => {
                if (e.target.id === 'reportModal') closeModal();
            });

            // ESCé”®å…³é—­æ¨¡æ€æ¡†
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeModal();
            });
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const totalSize = allReports.reduce((sum, report) => sum + report.size, 0);
            const avgSize = allReports.length > 0 ? totalSize / allReports.length : 0;
            
            document.getElementById('totalReports').textContent = allReports.length;
            document.getElementById('totalSize').textContent = formatFileSize(totalSize);
            document.getElementById('avgSize').textContent = formatFileSize(avgSize);
        }

        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 B';
            
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }

        // æœç´¢å¤„ç†
        function handleSearch(e) {
            currentSearch = e.target.value.toLowerCase().trim();
            applyFilters();
        }

        // åº”ç”¨ç­›é€‰
        function applyFilters() {
            filteredReports = allReports.filter(report => {
                return !currentSearch || 
                    report.title.toLowerCase().includes(currentSearch) ||
                    report.filename.toLowerCase().includes(currentSearch);
            });

            renderReports();
        }

        // æ¸²æŸ“æŠ¥å‘Šåˆ—è¡¨
        function renderReports() {
            const container = document.getElementById('reportsContainer');
            const loadingState = document.getElementById('loadingState');
            const emptyState = document.getElementById('emptyState');

            // éšè—åŠ è½½çŠ¶æ€
            loadingState.style.display = 'none';

            if (filteredReports.length === 0) {
                container.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }

            emptyState.style.display = 'none';
            container.style.display = 'block';

            // æ¸²æŸ“æŠ¥å‘Šå¡ç‰‡
            container.innerHTML = filteredReports.map(report => createReportCard(report)).join('');

            // ç»‘å®šå¡ç‰‡äº‹ä»¶
            bindCardEvents();
        }

        // åˆ›å»ºæŠ¥å‘Šå¡ç‰‡HTML
        function createReportCard(report) {
            const createdDate = new Date(report.created_at).toLocaleDateString('zh-CN');
            const modifiedDate = new Date(report.modified_at).toLocaleDateString('zh-CN');
            const fileSize = formatFileSize(report.size);
            
            return `
                <div class="report-card">
                    <div class="report-header">
                        <h3 class="report-title">${escapeHtml(report.title)}</h3>
                        <span class="report-size">${fileSize}</span>
                    </div>
                    
                    <div class="report-meta">
                        <div class="meta-item">
                            <i class="far fa-calendar"></i>
                            <span>åˆ›å»ºäº ${createdDate}</span>
                        </div>
                        <div class="meta-item">
                            <i class="far fa-clock"></i>
                            <span>ä¿®æ”¹äº ${modifiedDate}</span>
                        </div>
                        <div class="meta-item">
                            <i class="far fa-file"></i>
                            <span>${report.filename}</span>
                        </div>
                    </div>
                    
                    <div class="report-actions">
                        <button class="btn btn-primary view-report-btn" data-filename="${report.filename}">
                            <i class="fas fa-eye"></i>
                            æŸ¥çœ‹æŠ¥å‘Š
                        </button>
                        <a href="output/${report.filename}" 
                           class="btn btn-secondary" target="_blank" rel="noopener">
                            <i class="fas fa-download"></i>
                            ä¸‹è½½æ–‡ä»¶
                        </a>
                    </div>
                </div>
            `;
        }

        // ç»‘å®šå¡ç‰‡äº‹ä»¶
        function bindCardEvents() {
            document.querySelectorAll('.view-report-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const filename = e.target.closest('.view-report-btn').dataset.filename;
                    showReportModal(filename);
                });
            });
        }

        // æ˜¾ç¤ºæŠ¥å‘Šè¯¦æƒ…æ¨¡æ€æ¡†
        async function showReportModal(filename) {
            const report = allReports.find(r => r.filename === filename);
            if (!report) return;

            const modal = document.getElementById('reportModal');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('reportContent');

            title.textContent = report.title;
            content.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';

            try {
                // å°è¯•åŠ è½½æŠ¥å‘Šå†…å®¹
                const response = await fetch(`output/${filename}`);
                if (response.ok) {
                    let reportContent = await response.text();
                    content.innerHTML = renderMarkdown(reportContent);
                } else {
                    content.innerHTML = createSampleReport(report);
                }
            } catch (error) {
                content.innerHTML = createSampleReport(report);
            }

            // é«˜äº®ä»£ç 
            content.querySelectorAll('pre code').forEach(block => {
                hljs.highlightElement(block);
            });
        }

        // æ¸²æŸ“Markdownï¼ˆç®€å•å®ç°ï¼‰
        function renderMarkdown(markdown) {
            return markdown
                .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2">$1</a>')
                .replace(/\n\n/g, '</p><p>')
                .replace(/\n/g, '<br>')
                .replace(/^(.)/gim, '<p>$1')
                .replace(/$(.)/gim, '$1</p>');
        }

        // åˆ›å»ºç¤ºä¾‹æŠ¥å‘Šå†…å®¹
        function createSampleReport(report) {
            return `
                <h1>ğŸ“Š ${escapeHtml(report.title)}</h1>
                
                <h2>ğŸ“ æŠ¥å‘Šæ‘˜è¦</h2>
                <p>è¿™æ˜¯ä¸€ä»½ç”±Survey Agentè‡ªåŠ¨ç”Ÿæˆçš„å­¦æœ¯è°ƒç ”æŠ¥å‘Šã€‚æŠ¥å‘ŠåŸºäºä»arXivæœç´¢è·å¾—çš„ç›¸å…³è®ºæ–‡ï¼Œé€šè¿‡AIæŠ€æœ¯è¿›è¡Œæ™ºèƒ½æ‘˜è¦å’Œåˆ†æã€‚</p>
                
                <h2>ğŸ“š è®ºæ–‡åˆ—è¡¨</h2>
                <p>æœ¬æ¬¡è°ƒç ”å…±æ”¶é›†äº†å¤šç¯‡ç›¸å…³è®ºæ–‡ï¼Œæ¶µç›–äº†è¯¥é¢†åŸŸçš„æœ€æ–°ç ”ç©¶è¿›å±•å’Œå…³é”®æŠ€æœ¯çªç ´ã€‚</p>
                
                <h3>æ ¸å¿ƒè®ºæ–‡</h3>
                <ul>
                    <li><strong>è®ºæ–‡1</strong>: ä»‹ç»äº†ç›¸å…³æŠ€æœ¯çš„åŸºç¡€ç†è®ºå’Œæ–¹æ³•</li>
                    <li><strong>è®ºæ–‡2</strong>: æå‡ºäº†åˆ›æ–°çš„è§£å†³æ–¹æ¡ˆå’Œä¼˜åŒ–ç­–ç•¥</li>
                    <li><strong>è®ºæ–‡3</strong>: éªŒè¯äº†æ–¹æ³•çš„æœ‰æ•ˆæ€§å’Œå®ç”¨æ€§</li>
                </ul>
                
                <h2>ğŸ” æŠ€æœ¯åˆ†æ</h2>
                <p>é€šè¿‡å¯¹æ”¶é›†è®ºæ–‡çš„æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬è¯†åˆ«å‡ºäº†ä»¥ä¸‹å…³é”®æŠ€æœ¯è¶‹åŠ¿ï¼š</p>
                
                <blockquote>
                    <p>ğŸ’¡ <strong>å…³é”®æ´å¯Ÿ</strong>ï¼šè¯¥é¢†åŸŸæ­£æœç€æ›´åŠ æ™ºèƒ½åŒ–å’Œè‡ªåŠ¨åŒ–çš„æ–¹å‘å‘å±•ï¼Œæ–°å…´æŠ€æœ¯çš„èåˆä¸ºè§£å†³ä¼ ç»Ÿé—®é¢˜æä¾›äº†æ–°çš„æ€è·¯ã€‚</p>
                </blockquote>
                
                <h2>ğŸ“ˆ å‘å±•è¶‹åŠ¿</h2>
                <p>åŸºäºæ–‡çŒ®åˆ†æï¼Œæˆ‘ä»¬æ€»ç»“å‡ºä»¥ä¸‹å‘å±•è¶‹åŠ¿ï¼š</p>
                <ol>
                    <li><strong>æŠ€æœ¯èåˆ</strong>ï¼šå¤šç§æŠ€æœ¯çš„æ·±åº¦èåˆ</li>
                    <li><strong>æ•ˆç‡æå‡</strong>ï¼šç®—æ³•å’Œç³»ç»Ÿæ€§èƒ½çš„æŒç»­ä¼˜åŒ–</li>
                    <li><strong>åº”ç”¨æ‰©å±•</strong>ï¼šåº”ç”¨åœºæ™¯çš„ä¸æ–­æ‹“å±•</li>
                </ol>
                
                <h2>ğŸ¯ æ€»ç»“ä¸å±•æœ›</h2>
                <p>æœ¬æ¬¡è°ƒç ”ä¸ºç†è§£è¯¥é¢†åŸŸçš„å‘å±•ç°çŠ¶å’Œæœªæ¥æ–¹å‘æä¾›äº†é‡è¦å‚è€ƒã€‚éšç€æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼Œé¢„æœŸå°†æœ‰æ›´å¤šçªç ´æ€§è¿›å±•ã€‚</p>
                
                <hr>
                <p><em>ğŸ“… æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š${new Date(report.modified_at).toLocaleString('zh-CN')}</em></p>
                <p><em>ğŸ¤– ç”± Survey Agent è‡ªåŠ¨ç”Ÿæˆ</em></p>
            `;
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            const modal = document.getElementById('reportModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // é˜²æŠ–å‡½æ•°
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // HTMLè½¬ä¹‰
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(message) {
            const container = document.getElementById('reportsContainer');
            const loadingState = document.getElementById('loadingState');
            const emptyState = document.getElementById('emptyState');
            
            loadingState.style.display = 'none';
            container.style.display = 'none';
            emptyState.innerHTML = `
                <div class="empty-icon">âš ï¸</div>
                <h3>åŠ è½½å¤±è´¥</h3>
                <p>${escapeHtml(message)}</p>
                <button class="btn btn-primary" onclick="location.reload()">
                    <i class="fas fa-redo"></i>
                    é‡æ–°åŠ è½½
                </button>
            `;
            emptyState.style.display = 'block';
        }
    </script>
</body>
</html>